{% extends "admin/base_site.html" %}
{% load i18n admin_modify adminmedia %}

{% block extrahead %}{{ block.super }}
<script type="text/javascript" src="../../../jsi18n/"></script>
{{ media }}
{% endblock %}

{% block stylesheet %}{% admin_media_prefix %}css/forms.css{% endblock %}

{% block coltype %}{% if ordered_objects %}colMS{% else %}colM{% endif %}{% endblock %}

{% block bodyclass %}{{ opts.app_label }}-{{ opts.object_name.lower }} change-form{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
     {% trans "Home" %} &rsaquo;
     Pagetree &rsaquo;
     Site Hierarchy &rsaquo;
      
     {% for s in section.get_ancestors %}
        {{s.label}}
        {% ifnotequal s.label section.label %}
           &rsaquo;
        {% endifnotequal %}
     {% endfor %}
</div>
{% endblock %}

{% block content %}

<div id="content-main">

{% if errors %}
    <p class="errornote">
    {% blocktrans count errors|length as counter %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktrans %}
    </p>
    <ul class="errorlist">{% for error in adminform.form.non_field_errors %}<li>{{ error }}</li>{% endfor %}</ul>
{% endif %}

{% for blocktype in section.available_pageblocks %}
	{% if blocktype %}
		<form action="{% url add-pageblock section.id %}"
			{% if blocktype.add_form.is_multipart %}
			   enctype="multipart/form-data"
			{% endif %}
			method="post">
			<fieldset class="module aligned">
			   <legend>add {{ blocktype.display_name }}</legend>
				<input type="hidden" name="blocktype" value="{{blocktype.display_name}}"/>
				<table width="100%">
				{{section.add_pageblock_form.as_table}}
				{{blocktype.add_form.as_table}}
				</table>
				<div class="submit-row">
	            <input value="Add {{blocktype.display_name}}" class="default" name="_save" type="submit">
	         </div>
			</fieldset>
		</form>
	{% endif %}
{% endfor %}


{% endblock %}
